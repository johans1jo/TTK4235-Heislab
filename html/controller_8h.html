<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Elevator by Jo og Siri: source/controller.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Elevator by Jo og Siri
   &#160;<span id="projectnumber">1</span>
   </div>
   <div id="projectbrief">den beste heisen ever laget</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b2f33c71d4aa5e7af42a1ca61ff5af1b.html">source</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">controller.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This library contains the logic that controls the elevator movements.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;elev.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for controller.h:</div>
<div class="dyncontent">
<div class="center"><img src="controller_8h__incl.png" border="0" usemap="#source_2controller_8h" alt=""/></div>
<map name="source_2controller_8h" id="source_2controller_8h">
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="controller_8h__dep__incl.png" border="0" usemap="#source_2controller_8hdep" alt=""/></div>
<map name="source_2controller_8hdep" id="source_2controller_8hdep">
</map>
</div>
</div>
<p><a href="controller_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:afe776354e225815b2fdb1308becfa9d0"><td class="memItemLeft" align="right" valign="top">typedef enum <a class="el" href="controller_8h.html#aa19be6305a5a4485e1e70de70ed7d677">states</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="controller_8h.html#afe776354e225815b2fdb1308becfa9d0">states_t</a></td></tr>
<tr class="separator:afe776354e225815b2fdb1308becfa9d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:aa19be6305a5a4485e1e70de70ed7d677"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="controller_8h.html#aa19be6305a5a4485e1e70de70ed7d677">states</a> { <a class="el" href="controller_8h.html#aa19be6305a5a4485e1e70de70ed7d677a0cb1b2c6a7db1f1084886c98909a3f36">INIT</a> = 0, 
<a class="el" href="controller_8h.html#aa19be6305a5a4485e1e70de70ed7d677afd6a0e4343048b10646dd2976cc5ad18">IDLE</a>, 
<a class="el" href="controller_8h.html#aa19be6305a5a4485e1e70de70ed7d677a1061be6c3fb88d32829cba6f6b2be304">RUNNING</a>, 
<a class="el" href="controller_8h.html#aa19be6305a5a4485e1e70de70ed7d677a11915658ade106027bd75056b907539d">DOOR_OPEN</a>
 }</td></tr>
<tr class="separator:aa19be6305a5a4485e1e70de70ed7d677"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af29666bc4492206c0a8f18025da5fb0a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="controller_8h.html#af29666bc4492206c0a8f18025da5fb0a">controller_delete_order_at_floor</a> (int floor)</td></tr>
<tr class="memdesc:af29666bc4492206c0a8f18025da5fb0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes all orders at a floor.  <a href="#af29666bc4492206c0a8f18025da5fb0a">More...</a><br /></td></tr>
<tr class="separator:af29666bc4492206c0a8f18025da5fb0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6acb7bf61ebd1aadc637485d54bba761"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="controller_8h.html#a6acb7bf61ebd1aadc637485d54bba761">controller_delete_all_orders</a> ()</td></tr>
<tr class="memdesc:a6acb7bf61ebd1aadc637485d54bba761"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes all orders at all floors.  <a href="#a6acb7bf61ebd1aadc637485d54bba761">More...</a><br /></td></tr>
<tr class="separator:a6acb7bf61ebd1aadc637485d54bba761"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0908010f57221cdf378321156defbf13"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="controller_8h.html#a0908010f57221cdf378321156defbf13">controller_update_orders</a> ()</td></tr>
<tr class="memdesc:a0908010f57221cdf378321156defbf13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checking buttons: COMMAND, UP and DOWN and updates the ordes array.  <a href="#a0908010f57221cdf378321156defbf13">More...</a><br /></td></tr>
<tr class="separator:a0908010f57221cdf378321156defbf13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b9e23bbfadec5ee839e8e9157d26081"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="controller_8h.html#a0b9e23bbfadec5ee839e8e9157d26081">controller_update_elev_postition</a> (int *p_current_floor)</td></tr>
<tr class="memdesc:a0b9e23bbfadec5ee839e8e9157d26081"><td class="mdescLeft">&#160;</td><td class="mdescRight">Chekcs if the elevator has reached a floor and updates the current floor acordingly.  <a href="#a0b9e23bbfadec5ee839e8e9157d26081">More...</a><br /></td></tr>
<tr class="separator:a0b9e23bbfadec5ee839e8e9157d26081"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0c894bcc724527bbdd69b2ee25f871b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="controller_8h.html#ab0c894bcc724527bbdd69b2ee25f871b">controller_order_at_floor</a> (elev_motor_direction_t *p_priority_dir, elev_motor_direction_t elev_dir)</td></tr>
<tr class="memdesc:ab0c894bcc724527bbdd69b2ee25f871b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checking if there are orders at current floor and if the eleveator should stop. It also checks if the elevator is about to move bellow the bootom floor or above the top floor.  <a href="#ab0c894bcc724527bbdd69b2ee25f871b">More...</a><br /></td></tr>
<tr class="separator:ab0c894bcc724527bbdd69b2ee25f871b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f2f6e3d67a596407276d09193936bd2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="controller_8h.html#a2f2f6e3d67a596407276d09193936bd2">controller_order_at_current_floor</a> (elev_motor_direction_t *p_elev_dir, int e_stopped, int current_floor, int *p_dir_switch)</td></tr>
<tr class="memdesc:a2f2f6e3d67a596407276d09193936bd2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to check if the order is at the current floor so the elev can open the doors. It is also used to check if the elevator is actually at the floor it thinks it is after an emergency stop and if the elevator switched direction to get back to the floor it thinks it is at.  <a href="#a2f2f6e3d67a596407276d09193936bd2">More...</a><br /></td></tr>
<tr class="separator:a2f2f6e3d67a596407276d09193936bd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b5c053572a9fa9284474b13fc6ca666"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="controller_8h.html#a8b5c053572a9fa9284474b13fc6ca666">controller_orders_bellow</a> (elev_motor_direction_t *p_priority_dir, int current_floor)</td></tr>
<tr class="memdesc:a8b5c053572a9fa9284474b13fc6ca666"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if there are any orders of interest above current floor.  <a href="#a8b5c053572a9fa9284474b13fc6ca666">More...</a><br /></td></tr>
<tr class="separator:a8b5c053572a9fa9284474b13fc6ca666"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea909d8a658a7fd1c2e519a3ae13fe5c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="controller_8h.html#aea909d8a658a7fd1c2e519a3ae13fe5c">controller_orders_above</a> (elev_motor_direction_t *p_priority_dir, int current_floor)</td></tr>
<tr class="memdesc:aea909d8a658a7fd1c2e519a3ae13fe5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if there are any orders of interest above current floor.  <a href="#aea909d8a658a7fd1c2e519a3ae13fe5c">More...</a><br /></td></tr>
<tr class="separator:aea909d8a658a7fd1c2e519a3ae13fe5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0590c6fc85919f2e6c92facae7d2d97d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="controller_8h.html#a0590c6fc85919f2e6c92facae7d2d97d">controller_e_stop</a> (int *p_e_stopped, elev_motor_direction_t *p_elev_dir, elev_motor_direction_t *p_priority_dir, <a class="el" href="controller_8h.html#afe776354e225815b2fdb1308becfa9d0">states_t</a> *p_elev_state)</td></tr>
<tr class="memdesc:a0590c6fc85919f2e6c92facae7d2d97d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checking emergency stop and if an emergency stop has occured it deside if it's going to open the door or just stand still.  <a href="#a0590c6fc85919f2e6c92facae7d2d97d">More...</a><br /></td></tr>
<tr class="separator:a0590c6fc85919f2e6c92facae7d2d97d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d90abbd2fa39d3ea75f0802eb3529d9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="controller_8h.html#a2d90abbd2fa39d3ea75f0802eb3529d9">controller_update_lamps</a> ()</td></tr>
<tr class="memdesc:a2d90abbd2fa39d3ea75f0802eb3529d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Controll the lamps of whitch floor the elevator is or last was located in, floorpanel and elevatorepanel, but not the emergency lamp.  <a href="#a2d90abbd2fa39d3ea75f0802eb3529d9">More...</a><br /></td></tr>
<tr class="separator:a2d90abbd2fa39d3ea75f0802eb3529d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This library contains the logic that controls the elevator movements. </p>

<p class="definition">Definition in file <a class="el" href="controller_8h_source.html">controller.h</a>.</p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="afe776354e225815b2fdb1308becfa9d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe776354e225815b2fdb1308becfa9d0">&#9670;&nbsp;</a></span>states_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="controller_8h.html#aa19be6305a5a4485e1e70de70ed7d677">states</a>  <a class="el" href="controller_8h.html#afe776354e225815b2fdb1308becfa9d0">states_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Contains the state the elevator possible can be located in </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="aa19be6305a5a4485e1e70de70ed7d677"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa19be6305a5a4485e1e70de70ed7d677">&#9670;&nbsp;</a></span>states</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="controller_8h.html#aa19be6305a5a4485e1e70de70ed7d677">states</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Contains the state the elevator possible can be located in </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aa19be6305a5a4485e1e70de70ed7d677a0cb1b2c6a7db1f1084886c98909a3f36"></a>INIT&#160;</td><td class="fielddoc"><p>initialing elevator and state machine </p>
</td></tr>
<tr><td class="fieldname"><a id="aa19be6305a5a4485e1e70de70ed7d677afd6a0e4343048b10646dd2976cc5ad18"></a>IDLE&#160;</td><td class="fielddoc"><p>wating for orders </p>
</td></tr>
<tr><td class="fieldname"><a id="aa19be6305a5a4485e1e70de70ed7d677a1061be6c3fb88d32829cba6f6b2be304"></a>RUNNING&#160;</td><td class="fielddoc"><p>running the elevator </p>
</td></tr>
<tr><td class="fieldname"><a id="aa19be6305a5a4485e1e70de70ed7d677a11915658ade106027bd75056b907539d"></a>DOOR_OPEN&#160;</td><td class="fielddoc"><p>the door is open </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="controller_8h_source.html#l00013">13</a> of file <a class="el" href="controller_8h_source.html">controller.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a6acb7bf61ebd1aadc637485d54bba761"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6acb7bf61ebd1aadc637485d54bba761">&#9670;&nbsp;</a></span>controller_delete_all_orders()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int controller_delete_all_orders </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes all orders at all floors. </p>
<dl class="section return"><dt>Returns</dt><dd>0 when done. </dd></dl>

<p class="definition">Definition at line <a class="el" href="controller_8c_source.html#l00024">24</a> of file <a class="el" href="controller_8c_source.html">controller.c</a>.</p>

</div>
</div>
<a id="af29666bc4492206c0a8f18025da5fb0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af29666bc4492206c0a8f18025da5fb0a">&#9670;&nbsp;</a></span>controller_delete_order_at_floor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int controller_delete_order_at_floor </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>floor</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes all orders at a floor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">floor</td><td>Where orderes wil be destructed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 when done </dd></dl>

<p class="definition">Definition at line <a class="el" href="controller_8c_source.html#l00017">17</a> of file <a class="el" href="controller_8c_source.html">controller.c</a>.</p>

</div>
</div>
<a id="a0590c6fc85919f2e6c92facae7d2d97d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0590c6fc85919f2e6c92facae7d2d97d">&#9670;&nbsp;</a></span>controller_e_stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int controller_e_stop </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>p_e_stopped</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">elev_motor_direction_t *&#160;</td>
          <td class="paramname"><em>p_elev_dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">elev_motor_direction_t *&#160;</td>
          <td class="paramname"><em>p_priority_dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="controller_8h.html#afe776354e225815b2fdb1308becfa9d0">states_t</a> *&#160;</td>
          <td class="paramname"><em>p_elev_state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checking emergency stop and if an emergency stop has occured it deside if it's going to open the door or just stand still. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">e_stopped</td><td>Takes in a 0 or not 0 integer to tell if an emergiency stop has occured. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">elev_dir</td><td>The elevation direction of movement. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">priority_dir</td><td>Orders in this direction are prioritized. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">elev_state</td><td>The state the elevator currently is given from the state machine.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if the fuction does not take in a active emergency signal and therefore do nothing, 1 if it gets a stopsignal. </dd></dl>

<p class="definition">Definition at line <a class="el" href="controller_8c_source.html#l00194">194</a> of file <a class="el" href="controller_8c_source.html">controller.c</a>.</p>

</div>
</div>
<a id="a2f2f6e3d67a596407276d09193936bd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f2f6e3d67a596407276d09193936bd2">&#9670;&nbsp;</a></span>controller_order_at_current_floor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int controller_order_at_current_floor </td>
          <td>(</td>
          <td class="paramtype">elev_motor_direction_t *&#160;</td>
          <td class="paramname"><em>p_elev_dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>e_stopped</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>current_floor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>p_dir_switch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Used to check if the order is at the current floor so the elev can open the doors. It is also used to check if the elevator is actually at the floor it thinks it is after an emergency stop and if the elevator switched direction to get back to the floor it thinks it is at. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">p_elev_dir</td><td>The elevators direction of movement. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">e_stopped</td><td>0 or not 0 integer to tell if an emergency stop has occured. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">current_floor</td><td>The floor which the elevator last moved by. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">p_dir_switch</td><td>A variable to tell if the elevator has switched direction after an emergency stop occured.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 when there exists an order in the current floor, 2 if it's been an emergency stop and it's supposed to switch direction or 0 if not 1 or 2. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>When called this function may change <code>p_dir_switch</code> and therfore the next call will give a diffrent result. </dd></dl>

<p class="definition">Definition at line <a class="el" href="controller_8c_source.html#l00099">99</a> of file <a class="el" href="controller_8c_source.html">controller.c</a>.</p>

</div>
</div>
<a id="ab0c894bcc724527bbdd69b2ee25f871b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0c894bcc724527bbdd69b2ee25f871b">&#9670;&nbsp;</a></span>controller_order_at_floor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int controller_order_at_floor </td>
          <td>(</td>
          <td class="paramtype">elev_motor_direction_t *&#160;</td>
          <td class="paramname"><em>p_priority_dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">elev_motor_direction_t&#160;</td>
          <td class="paramname"><em>elev_dir</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checking if there are orders at current floor and if the eleveator should stop. It also checks if the elevator is about to move bellow the bootom floor or above the top floor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_priority_dir</td><td>Orders in this direction is prioritized. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">elev_dir</td><td>The elevators direction of movement.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 when done. </dd></dl>

<p class="definition">Definition at line <a class="el" href="controller_8c_source.html#l00066">66</a> of file <a class="el" href="controller_8c_source.html">controller.c</a>.</p>

</div>
</div>
<a id="aea909d8a658a7fd1c2e519a3ae13fe5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea909d8a658a7fd1c2e519a3ae13fe5c">&#9670;&nbsp;</a></span>controller_orders_above()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int controller_orders_above </td>
          <td>(</td>
          <td class="paramtype">elev_motor_direction_t *&#160;</td>
          <td class="paramname"><em>p_priority_dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>current_floor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if there are any orders of interest above current floor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">p_priority_dir</td><td>Orders in this direction is prioritized. If this equals DIRN_STOP this function may change it. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">current_floor</td><td>The floor which the elevator last moved by.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if order of interest above, 0 if not. </dd></dl>

<p class="definition">Definition at line <a class="el" href="controller_8c_source.html#l00163">163</a> of file <a class="el" href="controller_8c_source.html">controller.c</a>.</p>

</div>
</div>
<a id="a8b5c053572a9fa9284474b13fc6ca666"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b5c053572a9fa9284474b13fc6ca666">&#9670;&nbsp;</a></span>controller_orders_bellow()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int controller_orders_bellow </td>
          <td>(</td>
          <td class="paramtype">elev_motor_direction_t *&#160;</td>
          <td class="paramname"><em>p_priority_dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>current_floor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if there are any orders of interest above current floor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">p_priority_dir</td><td>Orders in this direction is prioritized. If this equals DIRN_STOP this function may change it. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">current_floor</td><td>The floor which the elevator last moved by.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if order of interest bellow, 0 if not. </dd></dl>

<p class="definition">Definition at line <a class="el" href="controller_8c_source.html#l00132">132</a> of file <a class="el" href="controller_8c_source.html">controller.c</a>.</p>

</div>
</div>
<a id="a0b9e23bbfadec5ee839e8e9157d26081"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b9e23bbfadec5ee839e8e9157d26081">&#9670;&nbsp;</a></span>controller_update_elev_postition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int controller_update_elev_postition </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>p_current_floor</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Chekcs if the elevator has reached a floor and updates the current floor acordingly. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_current_floor</td><td>A variable that contains the floor number.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 when done. </dd></dl>

<p class="definition">Definition at line <a class="el" href="controller_8c_source.html#l00054">54</a> of file <a class="el" href="controller_8c_source.html">controller.c</a>.</p>

</div>
</div>
<a id="a2d90abbd2fa39d3ea75f0802eb3529d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d90abbd2fa39d3ea75f0802eb3529d9">&#9670;&nbsp;</a></span>controller_update_lamps()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int controller_update_lamps </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Controll the lamps of whitch floor the elevator is or last was located in, floorpanel and elevatorepanel, but not the emergency lamp. </p>
<dl class="section return"><dt>Returns</dt><dd>0 when the function do it's job and succeed. </dd></dl>

<p class="definition">Definition at line <a class="el" href="controller_8c_source.html#l00221">221</a> of file <a class="el" href="controller_8c_source.html">controller.c</a>.</p>

</div>
</div>
<a id="a0908010f57221cdf378321156defbf13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0908010f57221cdf378321156defbf13">&#9670;&nbsp;</a></span>controller_update_orders()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int controller_update_orders </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checking buttons: COMMAND, UP and DOWN and updates the ordes array. </p>
<dl class="section return"><dt>Returns</dt><dd>0 when done. </dd></dl>

<p class="definition">Definition at line <a class="el" href="controller_8c_source.html#l00031">31</a> of file <a class="el" href="controller_8c_source.html">controller.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
